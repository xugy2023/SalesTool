{% extends 'base.html' %}
<head>
  <meta charset="UTF-8">
  <title>é¦–é¡µ - æ™ºèƒ½é”€å”®è¾…åŠ©ç³»ç»Ÿ</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
{% block content %}
<div class="container py-5">
  <h1 class="mb-4 hero-title">
    <i class="bi bi-people"></i> å®¢æˆ·ç®¡ç†
  </h1>
  <p class="lead text-muted">æ·»åŠ ã€ç¼–è¾‘å’Œå¯¼å…¥å®¢æˆ·ä¿¡æ¯ï¼Œä¾¿äºåç»­è·Ÿè¿›ä¸ç®¡ç†ã€‚</p>

  <div class="card border-0 shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="text-success"><i class="bi bi-person-plus"></i> å®¢æˆ·åˆ—è¡¨</h5>
        <a href="{{ url_for('customers.add_customer') }}" class="btn btn-success"><i class="bi bi-plus-circle"></i> æ·»åŠ æ–°å®¢æˆ·</a>
      </div>

      {% if customers %}
      <div class="table-responsive">
        <table class="table table-striped">
          <thead class="table-success">
            <tr>
              <th>å§“å</th>
              <th>è”ç³»æ–¹å¼</th>
              <th>çŠ¶æ€</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody>
            {% for customer in customers %}
            <tr>
              <td>{{ customer.name }}</td>
              <td>{{ customer.phone }}</td>
              <td>
                {% if customer.status == 'æœ‰æ„å‘' %}
                  <span class="badge bg-success">æœ‰æ„å‘</span>
                {% elif customer.status == 'æ— æ„å‘' %}
                  <span class="badge bg-danger">æ— æ„å‘</span>
                {% else %}
                  <span class="badge bg-warning text-dark">ä¿æŒè”ç³»</span>
                {% endif %}
              </td>
              <td>
                <a href="{{ url_for('customers.edit_customer', id=customer.id) }}" class="btn btn-sm btn-outline-primary">ç¼–è¾‘</a>
                <a href="{{ url_for('customers.delete_customer', id=customer.id) }}" class="btn btn-sm btn-outline-danger" onclick="return confirm('ç¡®å®šåˆ é™¤æ­¤å®¢æˆ·å—ï¼Ÿ')">åˆ é™¤</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
        <p class="text-muted">æš‚æ— å®¢æˆ·ä¿¡æ¯ã€‚</p>
      {% endif %}

      <hr class="my-4">
      <form action="{{ url_for('customers.import_customers') }}" method="POST" enctype="multipart/form-data">
        <label class="form-label">ğŸ“¥ æ‰¹é‡å¯¼å…¥å®¢æˆ· (CSVæ ¼å¼)ï¼š</label>
        <div class="input-group">
          <input type="file" class="form-control" name="file" accept=".csv" required>
          <button class="btn btn-outline-success" type="submit">å¯¼å…¥</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
